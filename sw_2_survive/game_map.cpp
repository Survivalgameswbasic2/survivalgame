#include"player.h"
#include "expire_tool.h"
#define MAP_WIDTH 34
#define MAP_HEIGHT 20
int newX, newY;
char game_map[20][MAP_HEIGHT][MAP_WIDTH + 1] = {
{
		//day0
"##################################",
"#              ####              #",
"#             ######             #",
"#    ####    ##xxx ##    ####    #",
"#   ##  ##  ##      ##  ## *##   #",
"#   #    ####        ####    #   #",
"#                            #   #",
"#   ##   x   ###  ###       ##   #",
"#    ###    ##      ##    ###    #",
"#      ## ###        ### ##      #",
"#      ## ###        ### ##      #",
"#    ###    ##      ##    ###    #",
"#   ##       ###  ###       ##   #",
"#    # x                    #    #",
"#   #    ####        ####    #   #",
"#   ## *##  ##      ##  ##N ##   #",
"#    ####    ## xxx##    ####    #",
"#             ######             #",
"#              ####              #",
"##################################"
},
//day1
{
		"##################################",
		"#       #  N  #* x #%%*%%%%%%%%%%#",
		"#  ###  # ### #x  x# ### # x  ####",
		"# xx##  #     # x  #%%%%%%%%%%%%*#",
		"#   ##  ### ###    ### ###    ##%#",
		"##x ##        x     x      #  ##%#",
		"#   ##   # ##   ##     ####   ##%#",
		"# #x###### ##  #####   ## ######%#",
		"#    x   # ##%%x%%%%%x%%%%%%%%%%%#",
		"# x      # ##%%%%%x%%%%%%%%%%%%%%#",
		"#xx  #######     ###    #######%%#",
		"# x      # ##  x     x  ##%%%%%%%#",
		"#    x   #x       x    ##N#%%%%%%#",
		"# xx###### ##   ####   ## ######%#",
		"#   ##   ####     ##   ## #   ##%#",
		"#xx ##x                 #  #  ##%#",
		"#  *##x ### ###    #######    ##%#",
		"######  ##   ##    ##*        ##%#",
		"#!     x#######    #######%%%%%%%#",
		"##################################"
	},
	// À§ÂÊ ÇÞºû ¸Ê
	{
		"##################################",
		"#%%%%%%%#%%N%%#*%x%#%%*%%%%%%%%%%#",
		"#%%###%%#%###%#x%%x#%###%#%x%%####",
		"#%x###%%#%   %#%x%%#%   % %%%%  *#",
		"#%% ##%%### ###%%%%### ###%%%%## #",
		"##x ##%%      x%%%% x     %#%%## #",
		"# % ##%% # ##  %##%    #### %%## #",
		"# #x###### ##  #####   ## ###### #",
		"#    x   # ##  x     x           #",
		"# x      # ##     x              #",
		"#xx  #######     ###    #######  #",
		"# x      # ##  x     x  ##       #",
		"#    x   #x       x    ##N#      #",
		"# xx###### ##   ####   ## ###### #",
		"#   ##   ####     ##   ## #   ## #",
		"#xx ##x                 #  #  ## #",
		"#  *##x ### ###    #######    ## #",
		"######  ##   ##    ##*        ## #",
		"#!     x#######    #######       #",
		"##################################"
	},
	// ¿ÞÂÊ ÇÞºû ¸Ê
	{
		"##################################",
		"#%%%%%%%#  N  #* x #  *          #",
		"#%%###  # ### #x  x# ### # x  ####",
		"#%xx##  #     # x  #            *#",
		"#%%%##  ### ###    ### ###    ## #",
		"##x%##        x     x      #  ## #",
		"#%%%##   # ##   ##     ####   ## #",
		"#%#x###### ##   ####   ## ###### #",
		"#%%%%x%%%# ##  x     x           #",
		"#%x%%%%%%# ##     x              #",
		"#xx%%#######     ###    #######  #",
		"#%x%%%%%%# ##  x     x  ##       #",
		"#%%%%x%%%#x       x    ##N#      #",
		"#%xx###### ##   ####   ## ###### #",
		"#%%%##   ####     ##   ## #   ## #",
		"#xx%##x                 #  #  ## #",
		"#%%*##x ### ###    #######    ## #",
		"######  ##   ##    ##*        ## #",
		"#!%%%%%x#######    #######       #",
		"##################################"
	},
	//day2
	{
		"##################################",
		"#      ###     x     ###%%x%%%%%x#",
		"#     ##*##    x    ##*##     #%%#",
		"#    ##   ##   x   ##   ##   #*#%#",
		"#       #    xxx      #%%%%%%%%%%#",
		"#  x   ###       #   ###    ##%%%#",
		"#    ## * ##    #x#  #     # *##%#",
		"#  ###x# #x### #   ## #      ##%%#",
		"#   x##  x##     ####     ###%%%%#",
		"#       ##   ###  x   ###   ##%%%#",
		"#      ####    ##    ##   ## #%%%#",
		"# x   #  xx#    ######    ##   #%#",
		"#   x### x### ###*###x     # # ###",
		"#    x   #   ###x  ##x  xx  ##%%%#",
		"#   #     ## ##x    ##  ##   ###!#",
		"#  #*#     ###x      ## ##   #####",
		"# ## ##     #x         ###     ###",
		"###    # #         #       ##x%%%#",
		"##   #     x## #     x#####%%%%%%#",
		"##################################"
	},
	// À§ÂÊ ÇÞºû ¸Ê
	{
		"##################################",
		"#%%%%%%###%%%%%x%%%%%###%%x%%%%%x#",
		"#%%%%%##*##%%%%x%%%%##*##%%%%%#%%#",
		"#%%%%##   ##%%%x%%%##   ##%%%#*#%#",
		"#%%%%   #   %xxx%%%   #   %%%   %#",
		"#%%x%  ###  %%%%%#%  ###  %%##  %#",
		"#%%%%## * ##%%%%#x#  #    %# *##%#",
		"#%%###x# #x###%#   ## #   %  ## %#",
		"#%% x##  x##  %  ####     ###   %#",
		"#%%     ##   ###  x   ###   ##  %#",
		"#%%    ####    ##    ##   ## #  %#",
		"#%x   #  xx#    ######    ##   #%#",
		"#%% x### x### ###*###x     # # ###",
		"#%%  x   #   ###x  ##x  xx  ##   #",
		"#%% #     ## ##x    ##  ##   ###!#",
		"#%%#*#     ###x      ## ##   #####",
		"#%## ##     #x         ###     ###",
		"###    # #         #       ##x   #",
		"##   #     x## #     x#####      #",
		"##################################"
	},
	// ¿ÞÂÊ ÇÞºû ¸Ê
	{
		"##################################",
		"#%%%%%%###     x     ###  x     x#",
		"#%%%%%##*##    x    ##*##     #  #",
		"#%%%%##   ##   x   ##   ##   #*# #",
		"#%%%%%%%#    xxx      #          #",
		"#%%x%%%###       #   ###    ##   #",
		"#%%%%## * ##    #x#  #     # *## #",
		"#%%###x# #x### #   ## #      ##  #",
		"#%%%x##  x##     ####     ###    #",
		"#%%%%%%%##   ###  x   ###   ##   #",
		"#%%%%%%####    ##    ##   ## #   #",
		"#%x%%%#  xx#    ######    ##   # #",
		"#%%%x### x### ###*###x     # # ###",
		"#%%%%x%%%#   ###x  ##x  xx  ##   #",
		"#%%%#     ## ##x    ##  ##   ###!#",
		"#%%#*#     ###x      ## ##   #####",
		"#%## ##     #x         ###     ###",
		"###    # #         #       ##x   #",
		"##   #     x## #     x#####      #",
		"##################################"
	}
};




bool is_player_near_npc(player* user, int map_num) {
	int dx[] = { -1, 1, 0, 0 };
	int dy[] = { 0, 0, -1, 1 };

	for (int i = 0; i < 4; i++) {
		newX = user->player_x + dx[i];
		newY = user->player_y + dy[i];
		if (newX >= 0 && newX < MAP_WIDTH && newY >= 0 && newY < MAP_HEIGHT &&
			game_map[map_num][newY][newX] == 'N') {
			return true;
		}
	}
	return false;
}

bool is_player_near_item(player* user, int map_num) {
	int dx[] = { -1, 1, 0, 0 };
	int dy[] = { 0, 0, -1, 1 };

	for (int i = 0; i < 4; i++) {
		newX = user->player_x + dx[i];
		newY = user->player_y + dy[i];
		if (newX >= 0 && newX < MAP_WIDTH && newY >= 0 && newY < MAP_HEIGHT &&
			game_map[map_num][newY][newX] == '*') {
			return true;
		}
	}
	return false;
}

bool is_zombie_position(int x, int y, int map_num) {
	return game_map[map_num][y][x] == 'x';
}

void draw_map(int day_num) {
	// Å×µÎ¸®¿Í ¸Ê Ãâ·Â
	for (int y = 0; y < MAP_HEIGHT; y++) {
		for (int x = 0; x < MAP_WIDTH; x++) {
			setCursorPosition(x * 2 + 1, y + 1);
			switch (game_map[day_num][y][x]) {
			case '#': printf("¡á"); break;
			case 'x': setColor(12); printf("¡á"); setColor(7); break; // Á»ºñ
			case '*': setColor(14); printf("¡Ú"); setColor(7); break; // ¾ÆÀÌÅÛ
			case 'N': setColor(9); printf("¡Ü"); setColor(7); break; // NPC
			default: printf("  "); break;
			}
		}
	}
}

